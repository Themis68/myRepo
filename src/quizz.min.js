var scripts=[],actions=[],timeCode="",avatar="",myURLcomplete=document.location.href,myURL=myURLcomplete.substring(0,myURLcomplete.lastIndexOf("/")),quizzNbPoint=0,stepBarre=0,stepDone=0,idQuizz=null,lois=[{num:1,libelle:"Terrain",fichier:fichier="loi_01.pdf"},{num:2,libelle:"Ballon",fichier:fichier="loi_02.pdf"},{num:3,libelle:"Joueurs",fichier:fichier="loi_03.pdf"},{num:4,libelle:"Equipements",fichier:fichier="loi_04.pdf"},{num:5,libelle:"Arbitre",fichier:fichier="loi_05.pdf"},{num:6,libelle:"Autres arbitres",fichier:fichier="loi_06.pdf"},{num:7,libelle:"Durée d'un match",fichier:fichier="loi_07.pdf"},{num:8,libelle:"Coup d'envoi et reprise de jeu",fichier:fichier="loi_08.pdf"},{num:9,libelle:"Ballon en jeu et hors du jeu",fichier:fichier="loi_09.pdf"},{num:10,libelle:"Issue d'un match",fichier:fichier="loi_10.pdf"},{num:11,libelle:"Hors-jeu",fichier:fichier="loi_11.pdf"},{num:12,libelle:"Fautes et incorrections",fichier:fichier="loi_12.pdf"},{num:13,libelle:"Coups francs",fichier:fichier="loi_13.pdf"},{num:14,libelle:"Penalty",fichier:fichier="loi_14.pdf"},{num:15,libelle:"Rentrée de touche",fichier:fichier="loi_15.pdf"},{num:16,libelle:"Coup de pied de but",fichier:fichier="loi_16.pdf"},{num:17,libelle:"Corner",fichier:fichier="loi_17.pdf"}],tabMessages=["cliquez sur la vignette du quizz que vous souhaitez jouer","cliquez sur cet icône pour afficher les quizz disponibles","vous allez démarrer le quizz pour obtenir le niveau ","vous venez de terminer le quizz<br>Votre score est de <b>","Sélectionnez un nouveau quizz."],nbQuests=[{niv:"COURANT",nb:0,points:0},{niv:"J'APPRENDS",nb:0,points:0},{niv:"JE COMPRENDS",nb:0,points:0}],niveauQuest=1,questionsFaites=[],seqUsed=-1,hauteurContent=0,questionOn=0,tabQuestions=[],pathImages="../images/",pathQuizz="../questionnaires/",pathPosters=pathQuizz+"posters/",pathBadges=pathQuizz+"badges/";function init(){var bascule;document.querySelector("bascule img").addEventListener("click",fBascule),creerVignettes("vignettes")}function creerVignettes(id){let ind=document.getElementById("indicateurs");for(let i=0;i<arrayAssoSize(scenario);i++){let myInd=document.createElement("li");myInd.setAttribute("data-target","#carousel-example"),myInd.setAttribute("data-slide-to",i),0===i?myInd.setAttribute("class","active cercle"):myInd.setAttribute("class","cercle"),ind.appendChild(myInd)}let bloc=document.getElementById(id);for(let i=0;i<arrayAssoSize(scenario);i++){let myDiv=document.createElement("div");myDiv.className="carousel-item col-12 col-sm-6 col-md-4 col-lg-3"+(0===i?" active":"");let myImg=document.createElement("img");myImg.className="img-fluid mx-auto d-block",myImg.setAttribute("alt","img"+i),myImg.setAttribute("title","img"+i),myImg.setAttribute("src",pathPosters+(scenario[i].poster||pathImages+"pelouses/stade.jpg"));let myCaption=document.createElement("div"),myF=document.createElement("img");myF.className="carouselFanion",myF.setAttribute("title","niveau : "+nbQuests[scenario[i].niveau].niv),myF.setAttribute("src",pathBadges+"badge"+(scenario[i].niveau+".png"||"fff.png'")),myCaption.appendChild(myF);let myP=document.createElement("p");myP.innerHTML=scenario[i].titre+" ("+(void 0===scenario[i].loi?"mix":"loi "+scenario[i].loi)+")",myCaption.appendChild(myP),myCaption.className="carousel-caption d-none d-md-block titre",myCaption.setAttribute("onclick","javascript:switchQuizz("+scenario[i].id+");"),myDiv.appendChild(myImg),myDiv.appendChild(myCaption),bloc.appendChild(myDiv);let myScript=document.createElement("SCRIPT");myScript.setAttribute("type","text/javascript"),myScript.setAttribute("src",pathQuizz+scenario[i].fichier),document.head.appendChild(myScript)}}function showContent(etat){let carousel,bascule_img,bascule_titre;document.getElementById("carousel").style.display=!0===etat?"none":"flex",document.querySelector("bascule img").setAttribute("src",pathImages+(!0===etat?"fleche_fermee.png":"fleche_ouverte.png")),document.querySelector("bascule span").innerHTML=avatar+" "+(!0===etat?tabMessages[1]:tabMessages[0])}function fBascule(event){let carousel=document.querySelector("carousel"),span=document.querySelector("bascule span");document.getElementById("content").style.display="none",this.src.indexOf("fermee")>0?(carousel.style.display="flex",this.src=pathImages+"fleche_ouverte.png",this.alt="affiche la liste des quizz",span.innerHTML=avatar+" "+tabMessages[0]):(carousel.style.display="none",this.src=pathImages+"fleche_fermee.png",this.alt="masque la liste des quizz",span.innerHTML=avatar+" "+tabMessages[1])}function switchQuizz(n){if(n>arrayAssoSize(scenario))return n=0,!1;quizz=scenario[n-1],tabQuestions=eval(quizz.variable),showContent(!0),gestionBoard("selectQuizz",quizz)}function gestionBoard(etape,objet){let inter=document.querySelector("inter");switch(etape){case"selectQuizz":document.getElementById("content").style.display="flex",document.querySelector("inter tete titre p").innerHTML=objet.titre,gestNiveaux(objet.niveau),scanQuestion(objet.niveau),document.getElementsByClassName("progress-bar")[0].style.display="none",document.querySelector("inter question p").style.display="none",document.querySelector("inter propositions").style.display="none",document.querySelector("inter complement").style.display="flex";let texte=avatar+" "+tabMessages[2]+" "+nbQuests[niveauQuest].niv+"<br>";texte+="Ce quizz de "+nbQuests[niveauQuest].nb+" question"+(nbQuests[niveauQuest].nb>1?"s":""),texte+=" porte sur "+(void 0===objet.loi?"un mix de lois":"la loi "+objet.loi+" - "+lois[parseFloat(objet.loi)-1].libelle),document.querySelector("inter complement p").innerHTML=texte,document.querySelector("inter complement img").style.display="none",document.querySelector("inter tete score p").style.display="none",addScore(0),document.querySelector("inter suite next").style.display="flex",document.querySelector("inter suite chrono").style.display="none",document.querySelector("inter").style.display="flex";break;case"InterQuestion":document.querySelector("inter complement").style.display="none",document.querySelector("inter tete score p").style.display="none",document.querySelector("inter propositions").style.display="none",document.querySelector("inter suite").style.display="flex",document.querySelector("inter suite next").style.display="none",document.querySelector("inter question p").style.display="flex",document.querySelector("inter question p").innerHTML=objet.question.libelle,document.getElementsByClassName("progress")[0].style.display="flex",document.getElementsByClassName("progress-bar")[0].style.display="flex",document.getElementsByClassName("progress-bar")[0].setAttribute("aria-valuenow",0),document.querySelector("inter suite chrono").style.display="none",document.querySelector("inter suite chrono p").innerHTML="0",myChronoQ=setInterval(chronoQ,1e3,7);break;case"InterReponse":let pChronoR;document.querySelector("inter tete score p").style.display="flex",document.getElementsByClassName("progress-bar")[0].setAttribute("aria-valuenow",0),document.getElementsByClassName("progress-bar")[0].style.display="none",document.getElementsByClassName("progress")[0].style.display="none",gestPropositions("afficher",objet),document.querySelector("inter propositions").style.display="flex",document.querySelector("inter suite next").style.display="none",document.querySelector("inter suite chrono").style.display="flex",document.querySelector("inter suite chrono p").innerHTML=void 0!==objet.reponse.temps?objet.reponse.temps:quizz.temps,document.querySelector("inter suite chrono").style.display="flex",myChronoR=setInterval(chronoR,1e3,objet.reponse);break;case"QuizzTermine":document.querySelector("inter complement").style.display="flex",document.querySelector("inter complement p").innerHTML=avatar+" "+tabMessages[3]+" "+quizzNbPoint+(quizzNbPoint>1?" points":" point")+"</b><br>"+tabMessages[4],document.querySelector("inter tete score p").style.display="flex",document.querySelector("inter question p").style.display="none",document.querySelector("inter propositions").style.display="none",document.querySelector("inter suite").style.display="flex",document.querySelector("inter suite chrono").style.display="none",document.querySelector("inter suite next").style.display="none";break;default:inter.display="none"}}function chronoQ(nbSecondesMax){let jauge=document.getElementsByClassName("progress-bar"),value=parseInt(jauge[0].getAttribute("aria-valuenow"),10)+1;console.log(value,nbSecondesMax),value>nbSecondesMax?continuer2():(jauge[0].setAttribute("aria-valuenow",value),pourCent=value/nbSecondesMax*100,jauge[0].setAttribute("style","width: "+pourCent+"%"))}function chronoR(reponse){let pChronoR=document.querySelector("inter suite chrono p"),value=parseInt(pChronoR.innerHTML,10);0==value?response(questionOn,-1):(value<=4&&playSound("comptearebours"),pChronoR.innerHTML=(value-1).toString())}function response(numQ,propSel){clearTimeout(myChronoR);for(let i=0;i<4;i++)document.getElementsByClassName("prop"+(i+1))[0].setAttribute("style","filter:grayscale(100%);"),document.getElementsByClassName("prop"+(i+1))[0].removeAttribute("onclick"),document.getElementById("book"+(i+1)).removeAttribute("onclick");myQ=tabQuestions[numQ-1],propSel!=myQ.reponse.solution?playSound("mauvaise"):(playSound("bonne"),addScore(myQ.reponse.points));let loi="";document.getElementsByClassName("prop"+myQ.reponse.solution)[0].setAttribute("style","filter:drop-shadow(2px 4px 6px);cursor:pointer"),null==myQ.reponse.loi?(console.log("loi du quizz",quizz.loi),loi=lois[quizz.loi-1].fichier):(console.log("loi de la question",myQ.reponse.loi),loi=lois[myQ.reponse.loi-1].fichier);let boutonOk=document.getElementById("book"+myQ.reponse.solution);boutonOk.className="fas fa-book",boutonOk.setAttribute("onclick","window.open('../lois/"+loi+"','_target')"),boutonOk.setAttribute("target","_blank"),boutonOk.setAttribute("title",loi),boutonOk.setAttribute("alt",loi),questionOn++,document.querySelector("inter suite chrono").style.display="none",document.querySelector("inter suite next").style.display="flex"}function addScore(value){0===value?quizzNbPoint=0:quizzNbPoint+=value,console.log(quizzNbPoint);var score=("0"+quizzNbPoint.toString()).substr(-2),scoreMax=("0"+nbQuests[niveauQuest].points.toString()).substr(-2);let myColor,myScore='<span style="color:'+(quizzNbPoint/nbQuests[niveauQuest].points>.5?"green":"black")+';">'+score+"</span>";document.querySelector("inter tete score p").innerHTML=myScore+":"+scoreMax}function gestNiveaux(niveau){let img=document.getElementById("badge");img.setAttribute("title",nbQuests[niveau].niv),img.setAttribute("alt",nbQuests[niveau].niv),img.setAttribute("src",pathBadges+"badge"+niveau+".png")}function scanQuestion(niveau){tabQuestions=[];let script=eval(quizz.variable);for(let ind=0;ind<arrayAssoSize(nbQuests);ind++)nbQuests[ind].nb=0,nbQuests[ind].points=0;let indexSelQuestions=0;for(let ind=0;ind<arrayAssoSize(script);ind++)script[ind].niveau==niveau&&(nbQuests[script[ind].niveau].nb++,nbQuests[script[ind].niveau].points+=script[ind].reponse.points,tabQuestions[indexSelQuestions]=script[ind],indexSelQuestions++);niveauQuest=niveau,questionOn=1}function gestJauge(numQuest,niveau){let pourCent=0,jauge=document.getElementsByClassName("progress-bar");0==numQuest?(jauge[0].setAttribute("aria-valuenow",0),jauge[0].setAttribute("style","width: 0%"),jauge[0].innerHTML=nbQuests[niveau].nb+" Questions"):(jauge[0].setAttribute("aria-valuenow",numQuest),pourCent=numQuest/nbQuests[niveau].nb*100,jauge[0].setAttribute("style","width: "+pourCent+"%"),jauge[0].innerHTML=numQuest)}function continuer(){showContent(!0),questionOn>nbQuests[niveauQuest].nb?(questionOn=0,gestionBoard("QuizzTermine")):(document.querySelector("inter suite next").style.display="none",gestionBoard("InterQuestion",tabQuestions[questionOn-1]))}function continuer2(){clearTimeout(myChronoQ),document.querySelector("inter suite").style.display="flex",document.querySelector("inter suite next").style.display="none";for(let i=0;i<4;i++)document.getElementsByClassName("prop"+(i+1))[0].setAttribute("style","filter:brightness(100%);");gestionBoard("InterReponse",tabQuestions[questionOn-1])}function gestPropositions(etape,objet){for(let i=0;i<4;i++){document.getElementById("card"+(i+1)).setAttribute("onclick","javascript:response("+questionOn+","+(i+1)+");");let myProp=document.getElementById("prop"+(i+1)).innerHTML=objet.question.attributs[i];document.getElementById("book"+(i+1)).className="far fa-comments"}}document.addEventListener("DOMContentLoaded",init,!1);